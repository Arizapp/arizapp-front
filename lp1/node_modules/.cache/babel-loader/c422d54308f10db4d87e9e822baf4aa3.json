{"ast":null,"code":"var _jsxFileName = \"/Applications/XAMPP/xamppfiles/htdocs/nodejs/reactjs/arizapp/lp1/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({});\nexport function AuthContextProvider(props) {\n  _s();\n\n  const [user, setUser] = useState();\n\n  async function authUser() {\n    var authUserPromise = new Promise((resolve, reject) => {\n      var resolvePromiseTimeout = setTimeout(function () {\n        resolve({\n          success: false,\n          msg: 'Auth user timed out! After 8 seconds without any auth answer,  we do trigger auth user timeout error.',\n          user_id: 0,\n          username: '',\n          password: '',\n          hostname: '',\n          address: '',\n          location: {\n            lat: 0,\n            lng: 0\n          }\n        });\n      }, 8000);\n      Z.ajax({\n        method: \"GET\",\n        url: 'http://localhost:8181/Auth/user/',\n        with_credentials: true,\n        response_type: 'json',\n        success: function (data) {\n          var _data$location3, _data$location4;\n\n          clearTimeout(resolvePromiseTimeout);\n\n          if (data === null || data === void 0 ? void 0 : data.success) {\n            var _data$location, _data$location2;\n\n            setUser({\n              user_id: 0,\n              username: data === null || data === void 0 ? void 0 : data.username,\n              password: '',\n              hostname: data === null || data === void 0 ? void 0 : data.host,\n              address: data === null || data === void 0 ? void 0 : data.address,\n              location: {\n                lat: data === null || data === void 0 ? void 0 : (_data$location = data.location) === null || _data$location === void 0 ? void 0 : _data$location.lat,\n                lng: data === null || data === void 0 ? void 0 : (_data$location2 = data.location) === null || _data$location2 === void 0 ? void 0 : _data$location2.lng\n              }\n            });\n          }\n\n          resolve({\n            success: data === null || data === void 0 ? void 0 : data.success,\n            msg: data === null || data === void 0 ? void 0 : data.msg,\n            user_id: 0,\n            username: data === null || data === void 0 ? void 0 : data.username,\n            password: '',\n            hostname: data === null || data === void 0 ? void 0 : data.host,\n            address: data === null || data === void 0 ? void 0 : data.address,\n            location: {\n              lat: data === null || data === void 0 ? void 0 : (_data$location3 = data.location) === null || _data$location3 === void 0 ? void 0 : _data$location3.lat,\n              lng: data === null || data === void 0 ? void 0 : (_data$location4 = data.location) === null || _data$location4 === void 0 ? void 0 : _data$location4.lng\n            }\n          });\n        },\n        error: function (error) {\n          var _data$location5, _data$location6;\n\n          clearTimeout(resolvePromiseTimeout);\n          var data = (error === null || error === void 0 ? void 0 : error.responseJSON) || {\n            success: false,\n            msg: 'unknown user auth error'\n          };\n          resolve({\n            success: data === null || data === void 0 ? void 0 : data.success,\n            msg: data === null || data === void 0 ? void 0 : data.msg,\n            user_id: 0,\n            username: data === null || data === void 0 ? void 0 : data.username,\n            password: '',\n            hostname: data === null || data === void 0 ? void 0 : data.host,\n            address: data === null || data === void 0 ? void 0 : data.address,\n            location: {\n              lat: data === null || data === void 0 ? void 0 : (_data$location5 = data.location) === null || _data$location5 === void 0 ? void 0 : _data$location5.lat,\n              lng: data === null || data === void 0 ? void 0 : (_data$location6 = data.location) === null || _data$location6 === void 0 ? void 0 : _data$location6.lng\n            }\n          });\n        }\n      });\n    });\n    return await authUserPromise;\n  }\n\n  async function singIn(data) {\n    async function doAjaxSignIn(username, password, hostname, successCallBack, errorCallBack) {\n      var singInPromise = new Promise(resolve => {\n        var singInPromiseTimeOut = setTimeout(() => {\n          resolve({\n            success: false,\n            msg: 'Sing In Promise timeout exceded.',\n            user: {}\n          });\n        }, 8000);\n        Z.ajax({\n          method: 'POST',\n          url: 'http://localhost:8181/Login/index/sign/',\n          with_credentials: true,\n          headers: {\n            \"Authorization\": \"Credentials \" + hostname + \":\" + username + \"@\" + password\n          },\n          data: {\n            remember_me: true\n          },\n          success: function (data) {\n            clearTimeout(singInPromiseTimeOut);\n            resolve({\n              success: true,\n              msg: 'Aparentemente sucesso em entrar.',\n              user: data\n            });\n            console.log('Login response: ', data);\n            successCallBack(data);\n          },\n          error: function (response) {\n            clearTimeout(singInPromiseTimeOut);\n            var data = (response === null || response === void 0 ? void 0 : response.responseJSON) || response;\n            console.log('Login error response: ', data);\n            resolve({\n              success: false,\n              msg: 'Algum erro aconteceu',\n              user: data\n            });\n            errorCallBack(data);\n          }\n        });\n      });\n    }\n\n    const successAjaxSignInCallback = async function (data) {\n      console.log('successAjaxSignInCallback Handle: ', data);\n      setUser(data);\n      return;\n    };\n\n    const errorAjaxSignInCallback = async function (data) {\n      console.log('errorAjaxSignInCallback Handle: ', data);\n      return;\n    };\n\n    var singInResult = await doAjaxSignIn((data === null || data === void 0 ? void 0 : data.username) || '', (data === null || data === void 0 ? void 0 : data.password) || '', (data === null || data === void 0 ? void 0 : data.hostname) || '', successAjaxSignInCallback, errorAjaxSignInCallback);\n    console.log('Sing In Result: ', singInResult);\n    return;\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      setUser,\n      authUser,\n      singIn\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 166,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuthContextProvider, \"kGLk6m4BT90iK1d91zRYm0C2usk=\");\n\n_c = AuthContextProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"sources":["/Applications/XAMPP/xamppfiles/htdocs/nodejs/reactjs/arizapp/lp1/src/contexts/AuthContext.tsx"],"names":["createContext","useState","AuthContext","AuthContextProvider","props","user","setUser","authUser","authUserPromise","Promise","resolve","reject","resolvePromiseTimeout","setTimeout","success","msg","user_id","username","password","hostname","address","location","lat","lng","Z","ajax","method","url","with_credentials","response_type","data","clearTimeout","host","error","responseJSON","singIn","doAjaxSignIn","successCallBack","errorCallBack","singInPromise","singInPromiseTimeOut","headers","remember_me","console","log","response","successAjaxSignInCallback","errorAjaxSignInCallback","singInResult","children"],"mappings":"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","sourcesContent":["import { createContext, ReactNode, useState, useEffect } from \"react\";\nexport type singInFunctionProps = {\n    username?: string;\n    password?: string;\n    hostname?: string;\n}\n\nexport type userType = {\n    user_id: number;\n    username?: string;\n    password?: string;\n    hostname?: string;\n    address?: string;\n    location?: { lat: number, lng: number };\n}\n\nexport type singInFunctionReturnType = {\n    success: boolean;\n    msg?: string;\n    user: userType;\n};\nexport type authUserFunctionReturnType = userType & {\n    success: boolean;\n    msg: string;\n}\nexport type AuthUserTypeContext = {\n    user: userType | undefined;\n    setUser: (userData: userType) => void;\n    authUser: () => Promise<authUserFunctionReturnType>;\n    singIn: (data: singInFunctionProps) => Promise<void>\n};\n\nexport const AuthContext = createContext({} as AuthUserTypeContext);\n\nexport type AuthContextProviderProps = {\n    children?: ReactNode\n};\n\nexport function AuthContextProvider(props: AuthContextProviderProps) {\n    const [user, setUser] = useState<userType>();\n    async function authUser() {\n        var authUserPromise = new Promise<authUserFunctionReturnType>((resolve, reject) => {\n            var resolvePromiseTimeout = setTimeout(function () {\n                resolve({\n                    success: false,\n                    msg: 'Auth user timed out! After 8 seconds without any auth answer,  we do trigger auth user timeout error.',\n                    user_id: 0,\n                    username: '',\n                    password: '',\n                    hostname: '',\n                    address: '',\n                    location: { lat: 0, lng: 0 },\n                });\n            }, 8000);\n            Z.ajax({\n                method: \"GET\",\n                url: 'http://localhost:8181/Auth/user/',\n                with_credentials: true,\n                response_type: 'json',\n                success: function (data: any) {\n                    clearTimeout(resolvePromiseTimeout);\n                    if (data?.success) {\n                        setUser({\n                            user_id: 0,\n                            username: data?.username,\n                            password: '',\n                            hostname: data?.host,\n                            address: data?.address,\n                            location: { lat: data?.location?.lat, lng: data?.location?.lng },\n                        });\n                    }\n                    resolve({\n                        success: data?.success,\n                        msg: data?.msg,\n                        user_id: 0,\n                        username: data?.username,\n                        password: '',\n                        hostname: data?.host,\n                        address: data?.address,\n                        location: { lat: data?.location?.lat, lng: data?.location?.lng },\n                    });\n                },\n                error: function (error: any) {\n                    clearTimeout(resolvePromiseTimeout);\n                    var data = error?.responseJSON || { success: false, msg: 'unknown user auth error' };\n                    resolve({\n                        success: data?.success,\n                        msg: data?.msg,\n                        user_id: 0,\n                        username: data?.username,\n                        password: '',\n                        hostname: data?.host,\n                        address: data?.address,\n                        location: { lat: data?.location?.lat, lng: data?.location?.lng },\n                    });\n                }\n            });\n        });\n        return await authUserPromise;\n    }\n\n    async function singIn(data: singInFunctionProps) {\n\n        async function doAjaxSignIn(username: string, password: string, hostname: string, successCallBack: (data: any) => void, errorCallBack: (data: any) => void) {\n            var singInPromise = new Promise<singInFunctionReturnType>((resolve) => {\n                var singInPromiseTimeOut = setTimeout(() => {\n                    resolve({\n                        success: false,\n                        msg: 'Sing In Promise timeout exceded.',\n                        user: {}\n                    });\n                }, 8000);\n                Z.ajax({\n                    method: 'POST',\n                    url: 'http://localhost:8181/Login/index/sign/',\n                    with_credentials: true,\n                    headers: { \"Authorization\": \"Credentials \" + hostname + \":\" + username + \"@\" + password, },\n                    data: { remember_me: true },\n                    success: function (data) {\n                        clearTimeout(singInPromiseTimeOut);\n                        resolve({\n                            success: true,\n                            msg: 'Aparentemente sucesso em entrar.',\n                            user: data\n                        });\n                        console.log('Login response: ', data);\n                        successCallBack(data);\n                    },\n                    error: function (response) {\n                        clearTimeout(singInPromiseTimeOut);\n                        var data = (response?.responseJSON || response);\n                        console.log('Login error response: ', data);\n                        resolve({\n                            success: false,\n                            msg: 'Algum erro aconteceu',\n                            user: data\n                        });\n                        errorCallBack(data);\n                    }\n                });\n            });\n        }\n\n        const successAjaxSignInCallback = async function (data: any) {\n            console.log('successAjaxSignInCallback Handle: ', data);\n            setUser(data);\n            return;\n        }\n\n        const errorAjaxSignInCallback = async function (data: any) {\n            console.log('errorAjaxSignInCallback Handle: ', data);\n            return;\n        }\n\n        var singInResult = await doAjaxSignIn(\n            (data?.username || ''), (data?.password || ''),\n            (data?.hostname || ''),\n            successAjaxSignInCallback,\n            errorAjaxSignInCallback\n        );\n        console.log('Sing In Result: ', singInResult);\n        return;\n    }\n\n    return (\n        <AuthContext.Provider value={{ user, setUser, authUser, singIn }}>\n            {props.children}\n        </AuthContext.Provider>\n    );\n}"]},"metadata":{},"sourceType":"module"}